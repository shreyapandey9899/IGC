<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Plus+Jakarta+Sans%3Awght%40400%3B500%3B700%3B800"
    />

    <title>Galileo Design</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  
  <body>
    <div
      class="relative flex size-full min-h-screen flex-col bg-[#1C1D22] dark group/design-root overflow-x-hidden"
      style='font-family: "Plus Jakarta Sans", "Noto Sans", sans-serif;'
    >
      <div class="layout-container flex h-full grow flex-col">
        <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#3C3F4A] px-10 py-3">
          <div class="flex items-center gap-4 text-[#F9FAFA]">
            <div class="size-4">
              <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 4H17.3334V17.3334H30.6666V30.6666H44V44H4V4Z" fill="currentColor"></path></svg>
            </div>
            <h2 class="text-[#F9FAFA] text-lg font-bold leading-tight tracking-[-0.015em]">Campus</h2>
          </div>
        </header>
        <div class="px-40 flex flex-1 justify-center py-5">
          <div class="layout-content-container flex flex-col w-[512px] max-w-[512px] py-5 max-w-[960px] flex-1">
            <h1 class="text-[#F9FAFA] tracking-light text-[32px] font-bold leading-tight px-4 text-center pb-3 pt-6">Welcome to Campus</h1>
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <input
                  placeholder="Enter your student email"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#F9FAFA] focus:outline-0 focus:ring-0 border border-[#505362] bg-[#22232A] focus:border-[#505362] h-14 placeholder:text-[#D5D6DD] p-[15px] text-base font-normal leading-normal"
                  value=""
                />
              </label>
            </div>
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <input
                  placeholder="Create a password"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#F9FAFA] focus:outline-0 focus:ring-0 border border-[#505362] bg-[#22232A] focus:border-[#505362] h-14 placeholder:text-[#D5D6DD] p-[15px] text-base font-normal leading-normal"
                  value=""
                />
              </label>
            </div>
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <input
                  placeholder="Confirm password"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#F9FAFA] focus:outline-0 focus:ring-0 border border-[#505362] bg-[#22232A] focus:border-[#505362] h-14 placeholder:text-[#D5D6DD] p-[15px] text-base font-normal leading-normal"
                  value=""
                />
              </label>
            </div>
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <input
                  placeholder="Full name"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#F9FAFA] focus:outline-0 focus:ring-0 border border-[#505362] bg-[#22232A] focus:border-[#505362] h-14 placeholder:text-[#D5D6DD] p-[15px] text-base font-normal leading-normal"
                  value=""
                />
              </label>
            </div>
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <input
                  placeholder="Student ID number"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#F9FAFA] focus:outline-0 focus:ring-0 border border-[#505362] bg-[#22232A] focus:border-[#505362] h-14 placeholder:text-[#D5D6DD] p-[15px] text-base font-normal leading-normal"
                  value=""
                />
              </label>
            </div>
            <div class="flex w-full grow bg-[#1C1D22] @container py-3 relative">
                <div class="w-full gap-1 overflow-hidden bg-[#1C1D22] @[480px]:gap-2 aspect-[3/2] flex relative">
                  <div
                    class="w-full bg-center bg-no-repeat bg-cover aspect-auto rounded-none flex-1"
                    style='background-image: url("https://cdn.usegalileo.ai/sdxl10/e40628a8-8ab4-4138-8c52-0ecc4f976820.png");'
                  ></div>
                  <!-- Upload button overlay -->
                  <label for="upload-id" class="absolute bottom-2 right-2 bg-[#607AFB] text-white px-4 py-2 rounded-lg cursor-pointer text-sm font-semibold">
                    Upload ID Card
                    <input id="upload-id" type="file" accept="image/*" class="hidden" />
                  </label>
                </div>
              </div>
              <div class="flex px-4 py-3 justify-center">
                <button
                  class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-12 px-5 flex-1 bg-[#607AFB] text-[#F9FAFA] text-base font-bold leading-normal tracking-[0.015em]"
                >
                  <span class="truncate">Sign Up</span>
                </button>
              </div>
            </div>
          </div>
          <footer class="flex justify-center">
            <div class="flex max-w-[960px] flex-1 flex-col">
              <p class="text-[#D5D6DD] text-sm font-normal leading-normal pb-3 pt-1 px-4 text-center underline">
                Already have an account? <a href="login.html" class="underline">Sign in</a>
              </p>
            </div>
          </footer>
        </div>
      </div>
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const signupButton = document.querySelector("button"); // Select the Sign Up button
      
          signupButton.addEventListener("click", async (e) => {
            e.preventDefault();
      
            // Collect form data
            const email = document.querySelector('input[placeholder="Enter your student email"]').value;
            const password = document.querySelector('input[placeholder="Create a password"]').value;
            const confirmPassword = document.querySelector('input[placeholder="Confirm password"]').value;
            const fullName = document.querySelector('input[placeholder="Full name"]').value;
            const studentId = document.querySelector('input[placeholder="Student ID number"]').value;
            const idCardInput = document.getElementById("upload-id").files[0]; // Get the ID card file
      
            if (password !== confirmPassword) {
              alert("Passwords do not match!");
              return;
            }
      
            // Read ID card file as base64 (for simplicity in this example)
            let idImage = null;
            if (idCardInput) {
              const reader = new FileReader();
              reader.readAsDataURL(idCardInput);
              idImage = await new Promise((resolve) => {
                reader.onload = () => resolve(reader.result);
              });
            }
         // Prepare the payload
      const payload = {
        email,
        password,
        idImage
      };

      try {
        const response = await fetch("http://localhost:3000/signup", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(payload)
        });

        const data = await response.json();

        if (response.ok) {
          alert(data.message);
          window.location.href = "login.html"; // Redirect to login page on success
        } else {
          alert(data.message); // Show error message from server
        }
      } catch (error) {
        console.error("Error:", error);
        alert("An error occurred. Please try again.");
      }
    });
  });
</script>      
    </body>
  </html>